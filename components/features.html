<section class="py-20 overflow-hidden">
    <div class="max-w-7xl mx-auto px-6 lg:px-8">
        <!-- 标题区 -->
        <div class="text-center mb-16">
            <h2 class="text-3xl md:text-4xl font-bold mb-4">
                <span class="gradient-text">功能亮点</span>
            </h2>
            <p class="text-lg text-gray-600 dark:text-gray-400 max-w-2xl mx-auto">
                Avision AI 提供全方位的智能家居设计解决方案，满足您的各种家居设计需求
            </p>
        </div>
        
        <!-- 功能卡片区 -->
        <div class="grid md:grid-cols-3 gap-8 lg:gap-12 relative">
            <!-- 背景装饰 -->
            <div class="absolute inset-0 -z-10 opacity-30">
                <svg width="100%" height="100%" viewBox="0 0 100 100" preserveAspectRatio="none">
                    <defs>
                        <radialGradient id="radial" cx="50%" cy="50%" r="50%" fx="50%" fy="50%">
                            <stop offset="0%" stop-color="rgba(56, 189, 248, 0.3)" />
                            <stop offset="100%" stop-color="rgba(0, 0, 0, 0)" />
                        </radialGradient>
                    </defs>
                    <rect x="0" y="0" width="100%" height="100%" fill="url(#radial)" />
                </svg>
            </div>
            
            <!-- 旧房全屋改造 -->
            <div class="feature-card diffused-border p-6 rounded-2xl transition-all duration-500 ease-out soft-shadow group hover:shadow-xl">
                <div class="relative w-full aspect-video mb-6 overflow-hidden rounded-xl">
                    <!-- 对比滑动控件 -->
                    <div class="image-comparison-slider">
                        <!-- 改造前图片 -->
                        <div class="comparison-before">
                            <img src="https://images.unsplash.com/photo-1493809842364-78817add7ffb?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80" 
                                alt="改造前" class="w-full h-full object-cover">
                        </div>
                        <!-- 改造后图片 -->
                        <div class="comparison-after">
                            <img src="https://images.unsplash.com/photo-1586023492125-27b2c045efd7?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80" 
                                alt="改造后" class="w-full h-full object-cover">
                            <div class="slider-handle">
                                <span class="right-arrow"></span>
                            </div>
                        </div>
                        <div class="slider-instruction">
                            <span class="left-label">原始</span>
                            <span class="divider">|</span>
                            <span class="right-label">改造</span>
                        </div>
                    </div>
                    <div class="absolute top-4 left-4 bg-primary-500/90 text-white text-sm px-3 py-1 rounded-full transform transition-transform duration-500 ease-out group-hover:scale-110">
                        旧房全屋改造
                    </div>
                </div>
                <h3 class="text-xl font-bold mb-3 gradient-text transform transition-all duration-500 ease-out group-hover:translate-x-1">旧房焕新，一键重塑</h3>
                <p class="text-gray-600 dark:text-gray-400 mb-4 transition-all duration-500 ease-out group-hover:text-gray-800 dark:group-hover:text-gray-300">
                    上传旧房照片，AI智能分析空间布局，结合您的需求与喜好，瞬间生成多种改造方案，从色彩搭配到家具选型，全方位满足您对家的期待。
                </p>
                <div class="flex items-center space-x-4 opacity-90 transition-all duration-500 ease-out group-hover:opacity-100">
                    <div class="feature-tag flex items-center">
                        <svg class="w-5 h-5 text-primary-500 transition-all duration-500 ease-out group-hover:scale-110" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                        </svg>
                        <span class="ml-1 text-sm transition-all duration-500 ease-out group-hover:font-medium">空间布局分析</span>
                    </div>
                    <div class="feature-tag flex items-center">
                        <svg class="w-5 h-5 text-primary-500 transition-all duration-500 ease-out group-hover:scale-110" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                        </svg>
                        <span class="ml-1 text-sm transition-all duration-500 ease-out group-hover:font-medium">多方案对比</span>
                    </div>
                </div>
            </div>
            
            <!-- 毛胚全装设计 -->
            <div class="feature-card diffused-border p-6 rounded-2xl transition-all duration-500 ease-out soft-shadow group hover:shadow-xl">
                <div class="relative w-full aspect-video mb-6 overflow-hidden rounded-xl">
                    <!-- 对比滑动控件 -->
                    <div class="image-comparison-slider">
                        <!-- 改造前图片 -->
                        <div class="comparison-before">
                            <img src="https://images.unsplash.com/photo-1604709177225-055f99402ea3?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80" 
                                alt="毛胚房" class="w-full h-full object-cover">
                        </div>
                        <!-- 改造后图片 -->
                        <div class="comparison-after">
                            <img src="https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80" 
                                alt="装修后" class="w-full h-full object-cover">
                            <div class="slider-handle">
                                <span class="right-arrow"></span>
                            </div>
                        </div>
                        <div class="slider-instruction">
                            <span class="left-label">毛胚</span>
                            <span class="divider">|</span>
                            <span class="right-label">装修</span>
                        </div>
                    </div>
                    <div class="absolute top-4 left-4 bg-secondary-500/90 text-white text-sm px-3 py-1 rounded-full transform transition-transform duration-500 ease-out group-hover:scale-110">
                        毛胚全装设计
                    </div>
                </div>
                <h3 class="text-xl font-bold mb-3 gradient-text transform transition-all duration-500 ease-out group-hover:translate-x-1">毛胚新生，全装定制</h3>
                <p class="text-gray-600 dark:text-gray-400 mb-4 transition-all duration-500 ease-out group-hover:text-gray-800 dark:group-hover:text-gray-300">
                    面对空无一物的毛胚房，AI为您量身打造从无到有的完整设计方案，风格多样，细节精致，让毛胚房瞬间变身温馨家园。
                </p>
                <div class="flex items-center space-x-4 opacity-90 transition-all duration-500 ease-out group-hover:opacity-100">
                    <div class="feature-tag flex items-center">
                        <svg class="w-5 h-5 text-secondary-500 transition-all duration-500 ease-out group-hover:scale-110" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                        </svg>
                        <span class="ml-1 text-sm transition-all duration-500 ease-out group-hover:font-medium">风格多样化</span>
                    </div>
                    <div class="feature-tag flex items-center">
                        <svg class="w-5 h-5 text-secondary-500 transition-all duration-500 ease-out group-hover:scale-110" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                        </svg>
                        <span class="ml-1 text-sm transition-all duration-500 ease-out group-hover:font-medium">细节精致化</span>
                    </div>
                </div>
            </div>
            
            <!-- AI全屋设计 -->
            <div class="feature-card diffused-border p-6 rounded-2xl transition-all duration-500 ease-out soft-shadow group hover:shadow-xl">
                <div class="relative w-full aspect-video mb-6 overflow-hidden rounded-xl">
                    <!-- 对比滑动控件 -->
                    <div class="image-comparison-slider">
                        <!-- 改造前图片 -->
                        <div class="comparison-before">
                            <img src="https://images.unsplash.com/photo-1615529182904-14819c35db37?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80" 
                                alt="普通设计" class="w-full h-full object-cover">
                        </div>
                        <!-- 改造后图片 -->
                        <div class="comparison-after">
                            <img src="https://images.unsplash.com/photo-1618221195710-dd6b41faaea6?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80" 
                                alt="AI设计" class="w-full h-full object-cover">
                            <div class="slider-handle">
                                <span class="right-arrow"></span>
                            </div>
                        </div>
                        <div class="slider-instruction">
                            <span class="left-label">普通</span>
                            <span class="divider">|</span>
                            <span class="right-label">AI智能</span>
                        </div>
                    </div>
                    <div class="absolute top-4 left-4 bg-gradient-to-r from-primary-500 to-secondary-500 text-white text-sm px-3 py-1 rounded-full transform transition-transform duration-500 ease-out group-hover:scale-110">
                        AI全屋设计
                    </div>
                </div>
                <h3 class="text-xl font-bold mb-3 gradient-text transform transition-all duration-500 ease-out group-hover:translate-x-1">AI全屋设计，智能定制</h3>
                <p class="text-gray-600 dark:text-gray-400 mb-4 transition-all duration-500 ease-out group-hover:text-gray-800 dark:group-hover:text-gray-300">
                    无论是旧房改造还是毛胚装修，AI都能精准把握您的需求，提供个性化、智能化的全屋设计方案，让设计不再受限，让家更懂您。
                </p>
                <div class="flex items-center space-x-4 opacity-90 transition-all duration-500 ease-out group-hover:opacity-100">
                    <div class="feature-tag flex items-center">
                        <svg class="w-5 h-5 text-primary-500 transition-all duration-500 ease-out group-hover:scale-110" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                        </svg>
                        <span class="ml-1 text-sm transition-all duration-500 ease-out group-hover:font-medium">个性化定制</span>
                    </div>
                    <div class="feature-tag flex items-center">
                        <svg class="w-5 h-5 text-secondary-500 transition-all duration-500 ease-out group-hover:scale-110" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                        </svg>
                        <span class="ml-1 text-sm transition-all duration-500 ease-out group-hover:font-medium">智能化方案</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 装饰元素 -->
        <div class="absolute bottom-0 right-0 w-32 h-32 opacity-60">
            <svg viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-full h-full">
                <circle cx="50" cy="50" r="40" stroke="url(#paint0_linear)" stroke-dasharray="2 4" stroke-width="0.5"/>
            </svg>
        </div>
    </div>
    
    <!-- 添加必要的样式到页面中 -->
    <style>
        /* 图片对比滑块样式 */
        .image-comparison-slider {
            position: relative;
            width: 100%;
            height: 100%;
            overflow: visible;
            cursor: pointer;
        }

        .comparison-before,
        .comparison-after {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: visible;
        }

        .comparison-after {
            width: 50%;
            border-right: 2px solid white;
            z-index: 1;
        }

        .slider-handle {
            position: absolute;
            top: 0;
            bottom: 0;
            right: -24px;
            width: 48px;
            background-color: rgba(255, 255, 255, 0.7);
            border-radius: 24px;
            cursor: ew-resize;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 0 6px rgba(0, 0, 0, 0.3);
            z-index: 2;
        }

        .feature-card .absolute {
            z-index: 10 !important;
        }

        .slider-handle .right-arrow {
            display: block;
            width: 0;
            height: 0;
            border-style: solid;
            border-width: 8px 0 8px 8px;
            border-color: transparent transparent transparent #333;
            margin-right: -8px;
        }

        .slider-handle .right-arrow:before {
            content: '';
            display: block;
            width: 0;
            height: 0;
            border-style: solid;
            border-width: 8px 8px 8px 0;
            border-color: transparent #333 transparent transparent;
            position: absolute;
            margin-left: -16px;
        }

        .slider-instruction {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%) translateY(0);
            background-color: rgba(0, 0, 0, 0.6);
            color: white;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 12px;
            display: flex;
            align-items: center;
            z-index: 20;
            transition: opacity 0.3s, transform 0.3s;
            opacity: 1;
        }

        .slider-instruction .left-label,
        .slider-instruction .right-label {
            padding: 0 5px;
        }

        .slider-instruction .divider {
            opacity: 0.7;
            margin: 0 2px;
        }

        /* 滑动状态样式 */
        .image-comparison-slider.sliding .slider-handle {
            background-color: rgba(255, 255, 255, 0.9);
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        }
        
        /* 在组件加载后显示提示，然后淡出 */
        .image-comparison-slider:hover .slider-instruction {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }

        /* 设置响应式图片 */
        .comparison-before img,
        .comparison-after img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
    </style>
    
    <!-- 独立添加脚本，防止被组件加载机制影响 -->
    <script type="text/javascript">
    (function() {
        // 立即执行初始化函数
        function initComparisonSliders() {
            console.log('正在初始化对比滑块...');
            const sliders = document.querySelectorAll('.image-comparison-slider');
            
            if(!sliders.length) {
                console.log('图片对比滑块元素未找到，1秒后重试...');
                setTimeout(initComparisonSliders, 1000);
                return;
            }
            
            console.log(`找到 ${sliders.length} 个图片对比滑块，初始化中...`);
            
            sliders.forEach((slider, index) => {
                const afterDiv = slider.querySelector('.comparison-after');
                const sliderHandle = slider.querySelector('.slider-handle');
                
                if(!afterDiv || !sliderHandle) {
                    console.log(`滑块 #${index+1} 对比滑块组件内部元素缺失`);
                    return;
                }
                
                console.log(`设置滑块 #${index+1} 的初始位置和事件`);
                
                // 确保手柄元素有正确的HTML结构
                if (!sliderHandle.querySelector('.right-arrow')) {
                    const rightArrow = document.createElement('span');
                    rightArrow.className = 'right-arrow';
                    sliderHandle.appendChild(rightArrow);
                }
                
                let isDown = false;
                let startX;
                let startWidth;
                
                // 设置初始位置（50%）
                afterDiv.style.width = '50%';
                
                // 鼠标按下事件
                function mouseDownHandler(e) {
                    console.log(`滑块 #${index+1} 鼠标按下`);
                    isDown = true;
                    slider.classList.add('sliding');
                    
                    // 获取正确的clientX，无论是鼠标事件还是触摸事件
                    const clientX = e.clientX || (e.touches && e.touches[0].clientX);
                    startX = clientX;
                    startWidth = afterDiv.offsetWidth;
                    
                    // 防止事件冒泡和默认行为
                    e.stopPropagation();
                    e.preventDefault();
                }
                
                // 鼠标移动事件
                function mouseMoveHandler(e) {
                    if (!isDown) return;
                    
                    const clientX = e.clientX || (e.touches && e.touches[0].clientX);
                    const walk = clientX - startX;
                    
                    let newWidth = startWidth + walk;
                    const minWidth = -24;
                    const maxWidth = slider.offsetWidth + 24;
                    newWidth = Math.max(minWidth, Math.min(maxWidth, newWidth));
                    
                    let percentage = (newWidth / slider.offsetWidth) * 100;
                    percentage = Math.max(0, Math.min(100, percentage));
                    
                    afterDiv.style.width = `${percentage}%`;
                    
                    if (percentage <= 0) {
                        sliderHandle.style.left = '0';
                    } else if (percentage >= 100) {
                        sliderHandle.style.right = '0';
                    } else {
                        sliderHandle.style.left = '';
                        sliderHandle.style.right = '-24px';
                    }
                }
                
                // 鼠标释放事件
                function mouseUpHandler() {
                    if (!isDown) return;
                    console.log(`滑块 #${index+1} 鼠标释放`);
                    isDown = false;
                    slider.classList.remove('sliding');
                }
                
                // 双击事件 - 重置到50%
                function dblClickHandler() {
                    console.log(`滑块 #${index+1} 双击重置`);
                    afterDiv.style.width = '50%';
                }
                
                // 移除可能的旧事件监听器
                sliderHandle.removeEventListener('mousedown', mouseDownHandler);
                sliderHandle.removeEventListener('touchstart', mouseDownHandler);
                document.removeEventListener('mousemove', mouseMoveHandler);
                document.removeEventListener('touchmove', mouseMoveHandler);
                document.removeEventListener('mouseup', mouseUpHandler);
                document.removeEventListener('touchend', mouseUpHandler);
                slider.removeEventListener('dblclick', dblClickHandler);
                
                // 添加新的事件监听器
                sliderHandle.addEventListener('mousedown', mouseDownHandler);
                sliderHandle.addEventListener('touchstart', mouseDownHandler, { passive: false });
                document.addEventListener('mousemove', mouseMoveHandler);
                document.addEventListener('touchmove', mouseMoveHandler, { passive: false });
                document.addEventListener('mouseup', mouseUpHandler);
                document.addEventListener('touchend', mouseUpHandler);
                slider.addEventListener('dblclick', dblClickHandler);
                
                // 向用户显示可以拖动的提示
                const instruction = slider.querySelector('.slider-instruction');
                if (instruction) {
                    instruction.style.opacity = '1';
                    instruction.style.transform = 'translateY(0)';
                    
                    // 5秒后隐藏提示
                    setTimeout(() => {
                        instruction.style.opacity = '0';
                        instruction.style.transform = 'translateY(-10px)';
                    }, 5000);
                }
            });
            
            console.log('所有对比滑块初始化完成');
        }
        
        // 页面加载完成后自动初始化
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', function() {
                setTimeout(initComparisonSliders, 1000);
            });
        } else {
            // 页面已经加载完成，立即初始化
            setTimeout(initComparisonSliders, 1000);
            
            // 为了确保组件被异步加载后也能初始化，再次延迟尝试
            setTimeout(initComparisonSliders, 3000);
        }
        
        // 监听页面变化，以应对动态加载的情况
        const observer = new MutationObserver(function(mutations) {
            mutations.forEach(function(mutation) {
                if (mutation.addedNodes.length) {
                    // 检查是否添加了对比滑块相关元素
                    mutation.addedNodes.forEach(function(node) {
                        if (node.nodeType === 1 && 
                            (node.classList && node.classList.contains('image-comparison-slider') || 
                             node.querySelector && node.querySelector('.image-comparison-slider'))) {
                            console.log('检测到新的对比滑块元素添加，重新初始化');
                            setTimeout(initComparisonSliders, 500);
                        }
                    });
                }
            });
        });
        
        // 开始监听文档变化
        observer.observe(document.body, { childList: true, subtree: true });
    })();
    </script>
</section> 